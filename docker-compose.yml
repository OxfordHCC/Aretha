version: "3" # docker-compose version
services:
  traffic_snitch:
    network_mode: "host"
    cap_add:
      - NET_ADMIN
      - NET_RAW
    container_name: aretha-traffic-snitch
    build:
      context: ./traffic_snitch
    environment:
      ARETHA_DEBUG: "True"
      ARETHA_DB_HOST: localhost
  database:
    container_name: aretha-database
    image: postgres
    environment:
      - POSTGRES_USER=aretha
      - POSTGRES_PASSWORD=aretha
      - POSTGRES_DB=aretha
    ports:
      - "5432:5432"
    volumes:
      - ./db/schema.sql:/docker-entrypoint-initdb.d/init.sql
